[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Replication Code",
    "section": "",
    "text": "# Load Packages\nlibrary(tidyverse)\nlibrary(lmtest)\nlibrary(sandwich)\nlibrary(fixest)\nlibrary(did)\nlibrary(panelView)\nlibrary(car)\nlibrary(showtext)\nlibrary(grid)\nlibrary(data.table)\nlibrary(FNN)\nlibrary(stringr)\nlibrary(plm)\nlibrary(scales)\nlibrary(modelsummary)\nlibrary(devtools)\nlibrary(foreign)\nlibrary(sandwich)\nlibrary(tidyverse)\nlibrary(stargazer) \nlibrary(effectsize)\nlibrary(MASS)\nlibrary(marginaleffects)\nlibrary(broom)\n\n\n# Function for cleaning the data (provided by GSS)\n read.dct &lt;- function(dct, labels.included = \"yes\") {\n      temp &lt;- readLines(dct)\n      temp &lt;- temp[grepl(\"_column\", temp)]\n      switch(labels.included,\n             yes = {\n                 pattern &lt;- \"_column\\\\(([0-9]+)\\\\)\\\\s+([a-z0-9]+)\\\\s+(.*)\\\\s+%([0-9]+)[a-z]\\\\s+(.*)\"\n                 classes &lt;- c(\"numeric\", \"character\", \"character\", \"numeric\", \"character\")\n                 N &lt;- 5\n                 NAMES &lt;- c(\"StartPos\", \"Str\", \"ColName\", \"ColWidth\", \"ColLabel\")\n             },\n             no = {\n                 pattern &lt;- \"_column\\\\(([0-9]+)\\\\)\\\\s+([a-z0-9]+)\\\\s+(.*)\\\\s+%([0-9]+).*\"\n                 classes &lt;- c(\"numeric\", \"character\", \"character\", \"numeric\")\n                 N &lt;- 4\n                 NAMES &lt;- c(\"StartPos\", \"Str\", \"ColName\", \"ColWidth\")\n             })\n      temp_metadata &lt;- setNames(lapply(1:N, function(x) {\n          out &lt;- gsub(pattern, paste(\"\\\\\", x, sep = \"\"), temp)\n          out &lt;- gsub(\"^\\\\s+|\\\\s+$\", \"\", out)\n          out &lt;- gsub('\\\"', \"\", out, fixed = TRUE)\n          class(out) &lt;- classes[x] ; out }), NAMES)\n      temp_metadata[[\"ColName\"]] &lt;- make.names(gsub(\"\\\\s\", \"\", temp_metadata[[\"ColName\"]]))\n      temp_metadata\n  }\n\n  read.dat &lt;- function(dat, metadata_var, labels.included = \"yes\") {\n      read.table(dat, col.names = metadata_var[[\"ColName\"]])\n  }\n\n# Load the data\nGSS_metadata &lt;- read.dct(\"~/Desktop/MA UC3M/TFM/OE/Juan Paper/data/GSS.dct\")\nGSS_ascii &lt;- read.dat(\"~/Desktop/MA UC3M/TFM/OE/Juan Paper/data/GSS.dat\", GSS_metadata)\nattr(GSS_ascii, \"col.label\") &lt;- GSS_metadata[[\"ColLabel\"]]\nGSS &lt;- GSS_ascii"
  },
  {
    "objectID": "index.html#perceptions-of-job-loss",
    "href": "index.html#perceptions-of-job-loss",
    "title": "Replication Code",
    "section": "Perceptions of Job Loss",
    "text": "Perceptions of Job Loss\n\n# BY CLASS\ndata3 |&gt;\n  group_by(sub_class) |&gt;\n  summarise(\n    avg_prop_cowork = mean(joblike_lose, na.rm = TRUE),\n    n = n()\n  )\n# BY OCCUPATION\ndata3 |&gt;\n  group_by(occ_major) |&gt;\n  summarise(\n    avg_prop_cowork = mean(joblike_lose, na.rm = TRUE),\n    n = n()\n  )"
  },
  {
    "objectID": "index.html#weight-networks-by-degree-of-contact",
    "href": "index.html#weight-networks-by-degree-of-contact",
    "title": "Replication Code",
    "section": "Weight Networks by Degree of Contact",
    "text": "Weight Networks by Degree of Contact\n\n# Weight networks by the intensity of contact\ndata3 &lt;- data3 |&gt;\n  rowwise() |&gt;\n  mutate(\n    weighted_cowork = if (!is.na(numgiven) && numgiven &gt; 0) {\n\n      cw &lt;- c(cowork1, cowork2, cowork3, cowork4, cowork5)[1:numgiven]\n      tk &lt;- c(talkto1, talkto2, talkto3, talkto4, talkto5)[1:numgiven]\n\n      num &lt;- sum(cw * tk, na.rm = TRUE)\n      den &lt;- sum(tk, na.rm = TRUE)\n\n      if (den &gt; 0) num / den else NA_real_\n\n    } else {\n      NA_real_\n    }\n  ) |&gt;\n  ungroup()"
  },
  {
    "objectID": "index.html#robustness-checks",
    "href": "index.html#robustness-checks",
    "title": "Replication Code",
    "section": "Robustness Checks",
    "text": "Robustness Checks\n\n# Test Heteroskedasticity\nbptest(m2) # not heteroskedastic\nbptest(m1) # not heteroskedastic"
  },
  {
    "objectID": "index.html#final-table",
    "href": "index.html#final-table",
    "title": "Replication Code",
    "section": "Final Table",
    "text": "Final Table\n\n# define models\nmodels &lt;- list(\n   \"Job Loss (Pure)\" = m1_pure,\n  \"Job Loss (full)\" = m1,\n   \"Job Security (Pure)\" = m2_pure,\n  \"Job Security (Full)\" = m2\n)\n\n# define variable names\ncoef_map &lt;- c(\n  \"weighted_cowork\" = \"Weighted coworker share\",\n  \"female\" = \"Female\",\n  \"age\" = \"Age\",\n  \"I(age^2)\" = \"Age squared\",\n  \"educ\" = \"Education\",\n  \"marital\" = \"Married\",\n  \"CHILDS\" = \"Children\",\n  \"hsincome\" = \"Household income\",\n  \"race\" = \"Race\",\n  \"rural\" = \"Rural\",\n  \"union\" = \"Union member\",\n  \"work_govt\" = \"Government worker\",\n  \"hrs_week\" = \"Hours worked per week\",\n  \"born\" = \"US-born\",\n  \"partyid\" = \"Party ID\"\n)\n\n# table\nmodelsummary(\n  models,\n  vcov = vcovHC,\n  statistic = \"std.error\",\n  coef_rename = coef_map,\n  stars = TRUE,\n  gof_omit = \"IC|Log|Adj|F\"\n)\n\n\n# Descriptive table\n# Extract data actually used in the model\nmf &lt;- model.frame(m1)\n\n# Descriptives for numeric variables\ndescriptives &lt;- data.frame(\n  N    = sapply(mf, function(x) sum(!is.na(x))),\n  Mean = sapply(mf, function(x) if (is.numeric(x)) mean(x, na.rm = TRUE) else NA),\n  SD   = sapply(mf, function(x) if (is.numeric(x)) sd(x, na.rm = TRUE) else NA),\n  Min  = sapply(mf, function(x) if (is.numeric(x)) min(x, na.rm = TRUE) else NA),\n  Max  = sapply(mf, function(x) if (is.numeric(x)) max(x, na.rm = TRUE) else NA)\n)\n\ndescriptives"
  }
]